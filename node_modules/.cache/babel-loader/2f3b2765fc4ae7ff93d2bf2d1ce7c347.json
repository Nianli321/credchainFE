{"ast":null,"code":"var _jsxFileName = \"/Users/nian/React-Firebase-Auth/src/components/Chat.js\";\nimport React, { useRef, useState } from 'react';\nimport './App.css';\nimport firebase from 'firebase/app';\nimport { auth, firestore } from '../firebase';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nexport default function ChatRoom() {\n  const dummy = useRef();\n  const messagesRef = firestore.collection('messages');\n  const query = messagesRef.orderBy('createdAt').limit(25);\n  const [messages] = useCollectionData(query, {\n    idField: 'id'\n  });\n  const [formValue, setFormValue] = useState('');\n  const sendMessage = async e => {\n    e.preventDefault();\n    const {\n      uid,\n      photoURL\n    } = auth.currentUser;\n    await messagesRef.add({\n      text: formValue,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      uid,\n      photoURL\n    });\n    setFormValue('');\n    dummy.current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, messages && messages.map(msg => /*#__PURE__*/React.createElement(ChatMessage, {\n    key: msg.id,\n    message: msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 42\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    ref: dummy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: formValue,\n    onChange: e => setFormValue(e.target.value),\n    placeholder: \"say something nice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: !formValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, \"\\uD83D\\uDD4A\\uFE0F\")));\n}\nfunction ChatMessage(props) {\n  const {\n    text,\n    uid,\n    photoURL\n  } = props.message;\n  const messageClass = uid === auth.currentUser.uid ? 'sent' : 'received';\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: `message ${messageClass}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: photoURL || 'https://api.adorable.io/avatars/23/abott@adorable.png',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, text)));\n}","map":{"version":3,"names":["React","useRef","useState","firebase","auth","firestore","useCollectionData","ChatRoom","dummy","messagesRef","collection","query","orderBy","limit","messages","idField","formValue","setFormValue","sendMessage","e","preventDefault","uid","photoURL","currentUser","add","text","createdAt","FieldValue","serverTimestamp","current","scrollIntoView","behavior","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","ChatMessage","key","id","message","ref","onSubmit","value","onChange","target","placeholder","type","disabled","props","messageClass","className","src"],"sources":["/Users/nian/React-Firebase-Auth/src/components/Chat.js"],"sourcesContent":["\n\nimport React, { useRef, useState } from 'react';\nimport './App.css';\nimport firebase from 'firebase/app';\n\n\nimport { auth, firestore } from '../firebase';\n\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\n\n\nexport default function ChatRoom() {\n    const dummy = useRef();\n    const messagesRef = firestore.collection('messages');\n    const query = messagesRef.orderBy('createdAt').limit(25);\n  \n    const [messages] = useCollectionData(query, { idField: 'id' });\n  \n    const [formValue, setFormValue] = useState('');\n  \n  \n    const sendMessage = async (e) => {\n      e.preventDefault();\n  \n      const { uid, photoURL } = auth.currentUser;\n  \n      await messagesRef.add({\n        text: formValue,\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n        uid,\n        photoURL\n      })\n  \n      setFormValue('');\n      dummy.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  \n    return (<>\n      <main>\n  \n        {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} />)}\n  \n        <span ref={dummy}></span>\n  \n      </main>\n  \n      <form onSubmit={sendMessage}>\n  \n        <input value={formValue} onChange={(e) => setFormValue(e.target.value)} placeholder=\"say something nice\" />\n  \n        <button type=\"submit\" disabled={!formValue}>üïäÔ∏è</button>\n  \n      </form>\n    </>)\n}\n\n\nfunction ChatMessage(props) {\nconst { text, uid, photoURL } = props.message;\n\nconst messageClass = uid === auth.currentUser.uid ? 'sent' : 'received';\n\nreturn (<>\n    <div className={`message ${messageClass}`}>\n    <img src={photoURL || 'https://api.adorable.io/avatars/23/abott@adorable.png'} />\n    <p>{text}</p>\n    </div>\n</>)\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}